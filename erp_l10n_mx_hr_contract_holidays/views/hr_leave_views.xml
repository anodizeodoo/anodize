<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="ir.ui.view" id="hr_leave_view_form_manager_inherit">
        <field name="name">hr.leave.view.form.inherit</field>
        <field name="model">hr.leave</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_form_manager"/>
        <field name="arch" type="xml">
            <!--            <xpath expr="//div[@name='title']" position="replace"/>-->
            <xpath expr="//label[@for='request_date_from']" position="before">
                <field name="employee_id" position="move"/>
                <field name="allocation_id" options="{'no_create': True, 'no_open': True}"
                       attrs="{'invisible': [('type', '!=', 'holidays')]}"/>
                <field name="considered_id" options="{'no_create': True, 'no_open': True}"
                       attrs="{'invisible': [('type', '!=', 'holidays')]}"/>
                <field name="holiday_status_id" options="{'no_create': True, 'no_open': True}"/>
                <field name="type" invisible="1"/>
                <field name="employee_company_id" invisible="1"/>
                <field name="folio" attrs="{'invisible': [('type', '=', 'holidays')]}"/>
            </xpath>
            <field name="department_id" position="after">
                <label for="number_of_days_display" position="move"/>
                <div name="duration_display" position="move"/>
                <field name="is_vacation" widget="boolean_toggle" attrs="{'invisible': [('type', '!=', 'holidays')]}"/>
                <field name="is_vacation_bonus" widget="boolean_toggle"
                       attrs="{'invisible': [('type', '!=', 'holidays')]}"/>
                <field name="name" position="move"/>
            </field>
            <label for="request_date_from" position="before">
                <label for="inability_date_from" string="Fecha Incapacidad"/>
                <div>
                    <div class="o_row o_row_readonly o_hr_holidays_dates">
                        <span class="oe_inline">Desde</span>
                        <field name="inability_date_from" class="oe_inline" nolabel="1"
                               attrs="{'readonly': [('state', 'not in', ('draft', 'confirm'))]}"/>
                        <span class="oe_inline">Hasta</span>
                        <field name="inability_date_to" class="oe_inline"
                               attrs="{'readonly': [('state', 'not in', ('draft', 'confirm'))]}"/>
                    </div>
                </div>
                <label for="request_date_from" position="move"/>
                <!--                <xpath expr="//group/group/div[1]" position="move"/>-->
            </label>
            <label for="request_date_from" position="attributes">
                <attribute name="string">Fecha de Aplicaci√≥n</attribute>
            </label>

            <field name="name" position="before">
                <field name="insurance_branch_id" options="{'no_create': True, 'no_open': True}"
                       attrs="{'invisible': [('type', '=', 'holidays')], 'required': [('type', '=', 'disabilities')]}"/>
                <field name="is_work_risk" invisible="1"/>
                <field name="risk_type_id" options="{'no_create': True, 'no_open': True}"
                       attrs="{'invisible': ['|', ('type', '=', 'holidays'), ('is_work_risk', '=', True)]}"/>
                <field name="inability"
                       attrs="{'invisible': ['|', ('type', '=', 'holidays'), ('is_work_risk', '=', True)]}"/>
                <field name="sequel_id" options="{'no_create': True, 'no_open': True}"
                       attrs="{'invisible': ['|', ('type', '=', 'holidays'), ('is_work_risk', '=', True)]}"/>
                <field name="disability_control_id" options="{'no_create': True, 'no_open': True}"
                       attrs="{'invisible': [('type', '=', 'holidays')]}"/>
                <field name="amount" attrs="{'invisible': [('type', '=', 'holidays')]}"/>
            </field>
            <field name="name" position="after">
                <field name="holiday_type" position="move"/>
                <field name="department_id" position="move"/>
            </field>
        </field>
    </record>

    <record model="ir.ui.view" id="hr_leave_view_tree_inherit">
        <field name="name">hr.holidays.view.tree.inherit</field>
        <field name="model">hr.leave</field>
        <field name="mode">primary</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_tree"/>
        <field name="arch" type="xml">
            <field name="holiday_status_id" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="employee_id" position="after">
                <field name="allocation_id"/>
            </field>
        </field>
    </record>

    <record id="hr_leave_view_form" model="ir.ui.view">
        <field name="name">hr.leave.view.form.inherit</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_form"/>
        <field name="arch" type="xml">
            <field name="holiday_status_id" position="before">
                <field name="considered_id" options="{'no_create': True, 'no_open': True}"
                       required="1"/>
            </field>
        </field>
    </record>

    <record id="hr_leave_holidays_action" model="ir.actions.act_window">
        <field name="name">Holidays</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.leave</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('type', '=', 'holidays')]</field>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('hr_leave_view_tree_inherit')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('hr_leave_view_form_manager_inherit')})]"/>
        <field name="context">{'from_holidays': True, 'default_type': 'holidays', 'type': 'holidays'}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent">
                No records found.
            </p>
        </field>
    </record>

    <record id="hr_leave_disabilities_action" model="ir.actions.act_window">
        <field name="name">Disabilities</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.leave</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('type', '=', 'disabilities')]</field>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('hr_leave_view_tree_inherit')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('hr_leave_view_form_manager_inherit')})]"/>
        <field name="context">{'default_type': 'disabilities', 'type': 'disabilities'}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent">
                No records found.
            </p>
        </field>
    </record>


    <menuitem
            id="menu_manager_approve_holidays"
            name="Holidays"
            parent="hr_holidays.menu_hr_holidays_approvals"
            action="hr_leave_holidays_action"
            sequence="4"/>

    <menuitem
            id="menu_manager_disabilities"
            name="Disabilities"
            parent="hr_holidays.menu_hr_holidays_approvals"
            action="hr_leave_disabilities_action"
            sequence="5"/>

</odoo>
